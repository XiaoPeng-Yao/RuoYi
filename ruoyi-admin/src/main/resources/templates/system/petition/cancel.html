<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<meta http-equiv="Content-Type" content="text/html ;charset=utf-8" />
<head>
    <th:block th:include="include :: header('日期和时间')" />
    <th:block th:include="include :: datetimepicker-css" />
</head>
<body class="gray-bg">
<form id="form-customer-case-cancel">
  <div class="col-md-12">
      <div class="form-group">
          <p class="text-center">请输入撤回原因：</p>
          <input type="hidden" id="id" th:value="*{id}">
          <div class="col-sm-9">
              <textarea type="text" id="cancelRemark" name="remark" class="form-control" placeholder="请输入撤回原因" required="true"></textarea>
          </div>
      </div>
  </div>
</form>
<th:block th:include="include :: footer" />
<script type="text/javascript">
    var prefix = ctx + "system/petition";

    $("#form-customer-case-cancel").validate({
        focusCleanup: true
    });

    function submitHandler() {
        if ($.validate.form()) {
            submitForm();
        }
    }

    function submitForm() {
        var object = {}
        object.id = $('#id').val();
        object.cancelRemark = $('#cancelRemark').val();
        $.ajax({
            url: prefix + "/revent",
            type: "post",
            data: object,
            dataType: "json",
            success: function(result) {
                debugger
                if (result.code == web_status.SUCCESS) {
                    result.msg = "操作成功！";
                    $.operate.successCallback(result);
                    $.modal.alertSuccess(result.msg);
                } else {
                    $.modal.closeLoading();
                    $.modal.alertError(result.msg);
                }
            }
        });
    }
    </script>
</body>
</html>