<!DOCTYPE HTML>
<html  lang="zh" xmlns:th="http://www.thymeleaf.org">
<meta http-equiv="Content-Type" content="text/html ;charset=utf-8" />
<head>
    <th:block th:include="include :: header('日期和时间')" />
    <th:block th:include="include :: datetimepicker-css"/>
    <th:block th:include="include :: bootstrap-select-css"/>
</head>
<body class="white-bg">
<div class="wrapper wrapper-content animated fadeInRight ibox-content">

    <div class="container">
        <div class="row">
            <div class="col-xs-2">
                <img src="../static/img/silergy.jpg" th:src="@{/img/silergy.jpg}">
            </div>
            <div class="col-xs-5">
                <h2 class="my-h2">
                    矽力杰半导体技术（杭州）有限公司
                </h2>

                <ul class="list-inline">
                    <li>
                        <h2 class="my-h3">签   呈 Petition</h2>
                        <br>
                    </li>
                </ul>

            </div>
        </div>
    </div>

    <form action="none" id="form-petition-add" th:object="${petition}">
        <input id="id" name="id" th:field="*{id}"  type="hidden">
        <div id="for-boder1">
            <table class="my-table1" border="0" cellpadding="0" cellspacing="0" width="100%">
                <tr>
                    <td colspan="6" style="width: 40%" class="text-left" >类别:
                        <select style="border: black" name="typeType" id="type" required disabled="true">
                            <option value="">请选择</option>
                            <option th:selected="${petition.typeType==1}"  value="1">A: 用印签呈</option>
                            <option th:selected="${petition.typeType==2}"  value="2">B: 请采购签呈</option>
                            <option th:selected="${petition.typeType==3}"  value="3">C: 其他</option>
                        </select>
                    </td>
                    <td  colspan="3" id="comNo"  class="text-right"> <h5>矽字第 No.<input type="text" name="comNo" th:field="*{comNo}" style="border:none;background-color: #FFFFFF" disabled="true"></h5></td>
                </tr>
            </table>
        </div>
        <div id="for-boder">
            <table class="my-table" width="100%">
                <tr id="topic1">
                    <td class="text-left" colspan="9"><h4>主题  Topic：</h4></td>
                </tr>
                <tr id="topic2">
                    <td class="text-left" colspan="9">
                        <textarea autoHeight="true"  type="text" id="topic" style="resize:none;" class="form-control" th:field="*{topicObj}" name="topicObj" placeholder="请输入250内的文字内容" disabled="true" ></textarea>
                    </td>
                </tr>
                <tr id="exp1">
                    <td class="text-left" colspan="9"><h4>说明  Explanation：</h4></td>
                </tr>
                <tr id="exp2">
                    <td class="text-center" colspan="9">
                        <textarea  style="resize:none; "type="text" autoHeight="true" name="explanation"disabled="true" class="form-control"th:field="*{explanation}" placeholder="请输入一千字以内的文字内容" ></textarea>
                    </td>
                </tr>
                <tr id="curr">
<!--                    <td colspan="9" class="text-left"><h4>币别:-->
<!--                        <input type="text" name="curr" disabled="true" th:field="*{curr}" style="border:none; " placeholder="例:美元/人民币/台币" />-->
<!--                    </h4></td>-->
                    <td colspan="9" class="text-left" style="position: relative;"><b>币别: </b>
                        <input th:checked="${petition.curr == '美元'}" name="curr" type="radio" value="美元" style="border:none;" disabled="true"/>美元
                        <input th:checked="${petition.curr == '人民币'}" name="curr" type="radio" value="人民币"  style="border:none;" disabled="true"/>人民币
                        <input th:checked="${petition.curr == '台币'}" name="curr" type="radio" value="台币"  style="border:none;" disabled="true"/>台币
                    </td>
                </tr>
                <tr id="monery"  >
                    <td  colspan="9" class="text-left"><b>金额:</b><label><input class="form-control" name="moneyM" disabled="true" th:field="*{moneyM}"id="moneyM" type="text" style="border:none;border-bottom:1px solid #000;" placeholder="例如2000"></label>元</td>
                </tr>
                <tr id="seal3" >
                    <td colspan="9" class="text-left"><h4>印鉴使用说明:
                        <label class="checkbox-inline">
                            <input type="radio"  disabled="true"value="1" th:field="*{sealExplain}" name="sealExplain"/> 直接用印:
                        </label>
                        <label class="checkbox-inline">
                            <input type="radio" disabled="true" value="2" th:field="*{sealExplain}" name="sealExplain"/> 外借:
                        </label>
                        <input type="text"  disabled="true"name="sealDate" th:value="${#dates.format(petition.sealDate,'yyyy-MM-dd')}"class="datetimepicker-yyyy-mm-dd"  style="border:none; " placeholder="选择日期" required="true">
                    </h4></td>
                </tr>
                <tr>
                    <td colspan="9" class="text-left">
                        <textarea type="text" autoHeight="true" name="moreExplain" class="form-control" disabled="true" th:field="*{moreExplain}"  style="resize:none;" placeholder="补充内容"></textarea>
                    </td>
                </tr>
                <tr>
                    <td colspan="2"class="text-center">公司</td>
                    <td class="text-center" colspan="3">
                        <select style="border: black" name="company"class="form-control" id="company" th:field="*{company}" disabled="true" required>
                            <option value="">请选择</option>
                            <option th:selected="${petition.typeType==5}" value="5">杭州</option>
                            <option th:selected="${petition.typeType==7}" value="7">西安</option>
                            <option th:selected="${petition.typeType==17}"  value="17">成都</option>
                            <option th:selected="${petition.typeType==19}"  value="19">上海</option>
                            <option th:selected="${petition.typeType==3}"  value="3">韩国</option>
                            <option th:selected="${petition.typeType==16}"  value="16">印度</option>
                            <option th:selected="${petition.typeType==15}"  value="15">日本</option>
                            <option th:selected="${petition.typeType==12}"  value="12">台湾矽力杰</option>
                            <option th:selected="${petition.typeType==6}"  value="6">南京</option>
                            <option th:selected="${petition.typeType==13}"  value="13">香港</option>
                            <option th:selected="${petition.typeType==14}"  value="14">上海矽力杰微电子</option>
                            <option th:selected="${petition.typeType==20}"  value="20">南京香港</option>
                            <option th:selected="${petition.typeType==4}"  value="4">美国</option>
                            <option th:selected="${petition.typeType==9}"  value="9">萨摩亚</option>
                            <option th:selected="${petition.typeType==1}"  value="1">corp</option>
                            <option th:selected="${petition.typeType==21}"  value="21">矽望</option>
                            <option th:selected="${petition.typeType==22}"  value="22">合肥</option>
                            <option th:selected="${petition.typeType==23}"  value="23">澳门</option>
                            <option th:selected="${petition.typeType==0}"  value="0">其他</option>
                        </select>
                    </td>
                    <td  colspan="2" class="text-center">部门</td>
                    <td colspan="2" class="text-center">
                        <input id="dept" name="dept" class="form-control" th:field="*{dept}" disabled="true" type="text" required>
                    </td>
                </tr>
                <tr>
                    <td class="text-center" colspan="2">工号</td>
                    <td colspan="3">
                        <input class="form-control" name="sid" id="sid" th:field="*{sid}" disabled="true" type="text" required>
                    </td>
                    <td colspan="2"></td>
                    <td colspan="2"></td>
                </tr>
                <tr>
                    <td class="text-center" colspan="2" width="20%">申请人</td>
                    <td colspan="3">
                        <input id="applyname" name="applyname" class="form-control" disabled="true" th:field="*{applyname}" type="text" required>
                    </td>
                    <td colspan="2" class="text-center">
                        <input   type="text" name="applydate" class="form-control  datetimepicker-yyyy-mm-dd" disabled="true" th:value="${#dates.format(petition.applydate,'yyyy-MM-dd')}" placeholder="申请日期" required="true">
                  </td>
                    <td colspan="2"></td>
                </tr>
                <tr>
                    <td class="text-center" colspan="2">部门主管</td>
                    <td colspan="2">
                        <input  class="form-control" name="deptmanager" disabled="true" th:field="*{deptmanager}" >
                    </td>
                    <td colspan="1" class="text-center" width="20%">
                        <select  class="form-control" name="deptmanagerSta" disabled="true" th:field="*{deptmanagerSta}" >
                            <option  value="">审核意见</option>
                            <option th:selected="${petition.deptmanagerSta==1}" value="1">同意</option>
                            <option th:selected="${petition.deptmanagerSta==2}" value="2">撤回</option>
                        </select>
                    </td>
                    <td colspan="2">
                        <textarea autoHeight="true" class="form-control" id="deptmanagerIdea" name="deptmanagerIdea" th:field="*{deptmanagerIdea}"  placeholder="备注" disabled="true"  type="text"></textarea>
                    </td>
                    <td colspan="2" class="text-center">
                        <input  type="text" name="deptmanageDate" disabled="true" th:value="${#dates.format(petition.deptmanageDate,'yyyy-MM-dd')}" class="form-control datetimepicker-yyyy-mm-dd" placeholder="签核日期" >
                    </td>
                </tr>
                <tr id="acoffer" >
                    <td  colspan="2"class="text-center">核准人:</td>
                    <td colspan="2" class="text-center">
                        <input class="form-control name-data" disabled="true" placeholder="请输入核准人姓名" th:field="*{acOfficer}" name="acOfficer" id="acOfficer" onclick="nameData()">
                    </td>
                    <td colspan="1" class="text-center">
                        <select name="acOfficerSta" class="form-control"  id="acOfficerSta" th:field="*{acOfficerSta}"  required>
                            <option value="">审核意见</option>
                            <option th:selected="${petition.acOfficerSta==1}" value="1">同意</option>
                            <option th:selected="${petition.acOfficerSta==2}" value="2" style="display: none">撤回</option>
                            <option th:selected="${petition.acOfficerSta==4}" value="4">否决</option>
                            <option th:selected="${petition.acOfficerSta==3}" value="3">加签</option>
                        </select>
                    </td>
                    <td colspan="2">
                        <textarea autoHeight="true" class="form-control" id="acOfficerIdea" name="acOfficerIdea" th:field="*{acOfficerIdea}"  placeholder="备注"  type="text" ></textarea>
                    </td>
                    <td colspan="2" class="text-center">
                        <input type="text" name="acOfficerDate" id="acOfficerDate"  th:value="${#dates.format(petition.acOfficerDate,'yyyy-MM-dd')}" class="form-control datetimepicker-yyyy-mm-dd nowdate" disabled="true" placeholder="签核日期" >
                    </td>
                </tr>
<!--               <tr id="fcManager" >-->
<!--                    <td colspan="2" class="text-center"  >核准人:财务总账</td>-->
<!--                    <td colspan="2" class="text-center">-->
<!--                        <select name="fcManager" class="form-control"  th:field="*{fcManager}"  disabled="true" >-->
<!--                            <option value="">请选择财务总账</option>-->
<!--                            <option th:selected="${petition.fcManager==1}" value="1">王娜</option>-->
<!--                            <option th:selected="${petition.fcManager==2}" value="2">畅佩华</option>-->
<!--                            <option th:selected="${petition.fcManager==3}" value="3">马海云</option>-->
<!--                            <option th:selected="${petition.fcManager==4}" value="4">林佳怡</option>-->
<!--                            <option th:selected="${petition.fcManager==5}" value="5">韓詩蕙</option>-->
<!--                            <option th:selected="${petition.fcManager==6}" value="6">张玲</option>-->
<!--                            <option th:selected="${petition.fcManager==7}" value="7">夏晶</option>-->
<!--                            <option th:selected="${petition.fcManager==8}" value="8">叶小仙</option>-->
<!--                            <option th:selected="${petition.fcManager==9}" value="9">庞杭艳</option>-->
<!--                            <option th:selected="${petition.fcManager==10}" value="10">王晶</option>-->
<!--                            <option th:selected="${petition.fcManager==11}" value="11">高甜</option>-->
<!--                        </select>-->
<!--                    </td>-->
<!--                   <td colspan="1" class="text-center">-->
<!--                       <select  name="fcManagerSta" class="form-control"    th:field="*{fcManagerSta}" disabled="true" >-->
<!--                           <option value="">请选择签核意见</option>-->
<!--                           <option th:selected="${petition.fcManagerSta==2}" value="1">同意</option>-->
<!--                           <option th:selected="${petition.fcManagerSta==2}" value="2">撤回</option>-->
<!--                       </select>-->
<!--                   </td>-->

<!--                    <td colspan="2">-->
<!--                        <input type="text" name="fcManagerDate"  disabled="true" th:value="${#dates.format(petition.fcManagerDate,'yyyy-MM-dd')}"  class="form-control datetimepicker-yyyy-mm-dd nowdate" placeholder="签核日期"  >-->
<!--                    </td>-->
<!--                   <td colspan="2">-->
<!--                       <input class="form-control" id="fcManagerIdea" name="fcManagerIdea" th:field="*{fcManagerIdea}"  placeholder="备注" disabled="true"  type="text" required>-->
<!--                   </td>-->

<!--                </tr>-->

<!--                <tr id="cfcoManager" >-->
<!--                    <td  colspan="2" class="text-center">核准人:财务经理</td>-->
<!--                    <td colspan="2" class="text-center" >-->
<!--                        <select  name="cfcoManager" class="form-control" id="cfco" th:field="*{cfcoManager}"  disabled="disabled" >-->
<!--                            <option th:selected="${petition.cfcoManager==2}" value="2" readonly="true">Brigt(庞杭艳)</option>-->
<!--                            <option th:selected="${petition.cfcoManager==3}" value="3" readonly="true">陈京晶</option>-->
<!--                        </select>-->
<!--                    </td>-->
<!--                    <td colspan="1" class="text-center">-->
<!--                        <select name="cfcoManagerSta" class="form-control" th:field="*{cfcoManagerSta} " disabled="disabled">-->
<!--                            <option value="">请选择签核意见</option>-->
<!--                            <option th:selected="${petition.cfcoManagerSta==2}" value="1">同意</option>-->
<!--                            <option th:selected="${petition.cfcoManagerSta==2}" value="2">撤回</option>-->
<!--                        </select>-->
<!--                    </td>-->

<!--                    <td colspan="2">-->
<!--                        <input type="text" name="cfcoManagerDate" disabled="disabled" th:value="${#dates.format(petition.cfcoManagerDate,'yyyy-MM-dd')}" required class="form-control datetimepicker-yyyy-mm-dd nowdate" placeholder="签核日期" >-->
<!--                    </td>-->
<!--                    <td colspan="2">-->
<!--                        <textarea autoHeight="true" class="form-control" id="cfcoManagerIdea" disabled="disabled" name="cfcoManagerIdea" th:field="*{cfcoManagerIdea}"  placeholder="备注"   type="text" ></textarea>-->
<!--                    </td>-->

<!--                </tr>-->
<!--                <tr>-->
<!--                    <td class="text-right" colspan="9">-->
<!--                        <button type="button" onclick="add()"><i class="fa fa-plus-square"></i>添加一行</button>-->
<!--                    </td>-->
<!--                </tr>-->

                <tr id="gmSta" th:if="${not #strings.isEmpty(petition.gm)}">
                    <td  colspan="2"class="text-center">核准人:</td>
                    <td colspan="2" class="text-center">
                        <input class="form-control" name="gm" disabled="true" id="gm" th:field="*{gm}">
                    </td>
                    <td colspan="1" class="text-center">
                        <select name="gmSta" class="form-control"   th:field="*{gmSta}"  disabled="true">
                            <option value="">审核意见</option>
                            <option th:selected="${petition.gmSta==1}" value="1">同意</option>
                            <option th:selected="${petition.gmSta==2}" value="2">撤回</option>
                        </select>
                    </td>
                    <td colspan="2">
                        <textarea class="form-control" id="gmIdea" name="gmIdea" th:field="*{gmIdea}"  placeholder="备注" disabled="true"  type="text"></textarea>
                    </td>
                    <td colspan="2" class="text-center">
                        <input type="text" name="gmDate"  th:value="${#dates.format(petition.gmDate,'yyyy-MM-dd')}" class="form-control datetimepicker-yyyy-mm-dd" placeholder="签核日期"  disabled="true">
                    </td>

                </tr>

                <tr th:each="petitionSign:${petitionSigns}" id="addColumn1">
                    <td class="text-center"  colspan="2" width="15%">核准人:</td>
                    <td class="text-center" colspan="2" >
                        <input class="form-control" name="Sign" id="Sign" disabled="true" th:value="${petitionSign.addName}" >
                    </td>
                    <td colspan="1" class="text-center">
                        <select  class="form-control"  name="result" disabled="true">
                            <option value="">审核意见</option>
                            <option th:selected="${petitionSign.result==1}" value="1">同意</option>
                            <option th:selected="${petitionSign.result==2}" value="2">撤回</option>
                        </select>
                    </td>
                    <td colspan="2">
                        <textarea type="text" autoHeight="true" th:text="${petitionSign.remark}" placeholder="备注" name="remark" class="form-control" readonly="true"></textarea>
                    </td>
                    <td colspan="2" class="text-center">
                        <input type="text" name="auditDate"  th:value="${#dates.format(petitionSign.addTime,'yyyy-MM-dd')}" class="form-control datetimepicker-yyyy-mm-dd" placeholder="签核日期"  disabled="true">
                    </td>
                </tr>

                <tr th:each="petitionTrialList:${petitionTrialList}" id="addtrial">
                    <td class="text-center"  colspan="2" width="15%">会审人:</td>
                    <td class="text-center" colspan="2" >
                        <input class="form-control" name="addTrialName" id="addTrialname" disabled th:value="${petitionTrialList.addName}" >
                    </td>
                    <td colspan="1" class="text-center">
                        <select  class="form-control"  name="result" disabled="true">
                            <option value="">审核意见</option>
                            <option th:selected="${petitionTrialList.result==1}" value="1">同意</option>
                            <option th:selected="${petitionTrialList.result==2}" value="2">撤回</option>
                        </select>
                    </td>
                    <td colspan="2">
                        <textarea type="text" autoHeight="true" th:text="${petitionTrialList.remark}" placeholder="备注" name="remark" class="form-control" readonly="true"></textarea>
                    </td>
                    <td colspan="2" class="text-center">
                        <input type="text" name="auditDate"  th:value="${#dates.format(petitionTrialList.addTime,'yyyy-MM-dd')}" class="form-control datetimepicker-yyyy-mm-dd" placeholder="签核日期"  disabled="true">
                    </td>
                </tr>
                <tbody class="my-table2">
                <tr id="addColumn" class="addaudit">
                    <td class="text-center" style="width: 20%" colspan="2">
                        加签类型:
                    </td>
                    <td  style="width:20%" colspan="2">
                        <div class="input-group" style="width: 96%">
                            <select class="form-control noselect2" id="addauditSta" name="addauditSta"
                                    required="true"
                                    disabled="disabled">
                                <option value="">请选择</option>
                                <option value="1">前加签</option>
                                <option value="2">后加签</option>
                            </select>
                        </div>
                    </td>
                    <td class="text-center"  style="width: 20%" colspan="2">加签人员</td>
                    <td  style="width: 20%" colspan="2">
                        <div class="input-group" style="width: 98%;margin-left: 1%">
                            <select id="addname" name="addname" class="form-control text-center selectpicker"
                                    data-live-search="true" disabled="true" required="true">
                                <option value="">请选择</option>
                            </select>
                        </div>
<!--                        <input required="true"  class="form-control name-data" id="addname" onclick="nameData()" disabled="true">-->
                    </td>
                </tr>
                </tbody>

                <!--审核时候可以查看加签人员-->
                <tr th:each="petitionAddaudit:${petitionAddaudits}" th:if="${not #lists.isEmpty(petitionAddaudits)}">
                    <td class="text-center" colspan="2">
                        加签人员
                    </td>
                    <td class="text-center" colspan="2">
                        <input class="form-control" th:value="${petitionAddaudit.addName}" readonly="true">
                    </td>
                    <td class="text-center" colspan="1">
                        <select name="result" class="form-control" disabled="disabled">
                            <option value="">审核意见</option>
                            <option th:selected="${petitionAddaudit.result==1}" value="1">同意</option>
                            <option th:selected="${petitionAddaudit.result==2}" value="2">撤回</option>
                        </select>
                    </td>
                    <td class="text-center" colspan="2">
                        <textarea type="text" autoHeight="true" th:text="${petitionAddaudit.remark}" class="form-control" readonly="true"></textarea>
                    </td>
                    <td colspan="2" class="text-center">
                        <input type="text" th:value="${#dates.format(petitionAddaudit.createTime,'yyyy-MM-dd')}" class="form-control datetimepicker-yyyy-mm-dd"  disabled="true">
                    </td>
                </tr>

            </table>
            <table th:if="${not #lists.isEmpty(petitionFiles)}" class="my-table" width="100%">
                <thead>
                <tr style="height: 34px">
                    <td style="width: 0.1%">
                    </td>
                    <td class="text-center" style="width: 20%">
                        附件上传日期:
                    </td>
                    <td class="text-center" style="width: 60%">
                        附件档案名称:
                    </td>
                    <td class="text-center" style="width: 20%">
                        下载:
                    </td>
                </tr>
                </thead>
                <tr th:each="file:${petitionFiles}">
                    <td>
                        <input id="filePath" th:value="${file.filePath}" class="form-control text-center" type="hidden" disabled="true"/>
                    </td>
                    <td>
                        <input th:value="${#dates.format(file.createTime, 'yyyy-MM-dd')}" class="form-control text-center"  disabled="true"/>
                    </td>
                    <td class="text-center">
                        <input id="fileName" th:value="${file.fileName}" class="form-control text-center" type="text" disabled="true"/>
                    </td>
                    <td class="text-center">
                        <button type="button" class="btn btn-info btn-xs" th:onclick="'downloadFaReport(\''+${file.id}+'\',this)'">download</button>
                    </td>
                </tr>
            </table>
        </div>
        
        <div class="col-sm-offset-5 col-sm-10 bottom">
            <button type="button" class="btn btn-sm btn-primary" onclick="auditcwManager()"><i class="fa fa-send"></i>提交</button>
            <button type="button" class="btn btn-sm btn-danger" onclick="closeItem()"><i class="fa fa-reply-all"></i>关闭</button>
        </div>

    </form>

</div>
<div th:include="include::footer"></div>
<div th:include="include::bootstrap-select-js"></div>
<script th:src="@{/js/jquery-ui-1.10.4.min.js}"></script>
<script th:src="@{/ajax/libs/iCheck/icheck.min.js}"></script>
<script th:src="@{/ajax/libs//datapicker/bootstrap-datetimepicker.min.js}"></script>
<script th:src="@{/ajax/libs/beautifyhtml/beautifyhtml.js}"></script>
<script th:src="@{/ajax/libs/typeahead/bootstrap3-typeahead.min.js}"></script>

<script type="text/javascript">
    var prefix = ctx + "system/petition";
    var comprefix = ctx + "common/";
    function downloadFaReport(id,obj) {
        debugger
        var filePath = $(obj).parent().parent().children('td').eq(0).find("#filePath").val();
        var fileName = $(obj).parent().parent().children('td').eq(2).find("#fileName").val();
        window.location.href = comprefix + "/download/resources?resource=" + encodeURIComponent(filePath) + "&fileName=" + encodeURIComponent(fileName);
    }

    /*$(function(){
        $(".datetimepicker-yyyy-mm-dd").datetimepicker({
            format: "yyyy-mm-dd",
            minView: "month",
            autoclose: true
        });
    });*/

    //选择加签时,提示框
    $(document).on("change", "#acOfficerSta", function () {
        if ($(this).val() == "3") {
            $("#addauditSta").attr("disabled", false);
            $("#addname").attr("disabled", false);
            getUser();
        } else {
            $("#acOfficerIdea").attr("disabled", false);
            $("#addauditSta").attr("disabled", true);
            $("#addname").attr("disabled", true);
            $("#addauditSta").val("");
            $("#addname").val("");
            $("#addname").selectpicker("destroy");
        }
    })

    //选择加签时,提示框
    $(document).on("change", "#addauditSta", function () {
        if ($(this).val() == "1" && $("#acOfficerSta").val() == "3"){
            $("#acOfficerIdea").attr("disabled", true);
            $("#acOfficerIdea").val("");
        }else if ($(this).val() == "2" && $("#acOfficerSta").val() == "3") {
            $.modal.alert("选择后加签默认同意此次请求，<br>请谨慎选择！", "warning");
            $("#acOfficerIdea").attr("disabled", false);
        }else{
            $("#acOfficerIdea").attr("disabled", false);
        }
    })


    $(function(){
        $.fn.autoHeight = function(){
            function autoHeight(elem){
                elem.style.height = 'auto';
                elem.scrollTop = 0; //防抖动
                elem.style.height = elem.scrollHeight + 'px';
            }
            this.each(function(){
                autoHeight(this);
                $(this).on('keyup', function(){
                    autoHeight(this);
                });
            });
        }
        $('textarea[autoHeight]').autoHeight();
    })

    //自动填充时间
    $(function () {
        function f() {
            var now = new Date();
            var year = now.getFullYear();       //年
            var month = now.getMonth() + 1;     //月
            var day = now.getDate();            //日
            var clock = year + "-";
            if(month < 10)
                clock += "0";
            clock += month + "-";
            if(day < 10)
                clock += "0";
            clock += day + "";
            return clock;
        }
        $(".nowdate").val(f());
    });
    //类型显示
    $(function () {
        var type=$('#type').val();
        if (type=="1"){
            $("#hr").show();
            $("#topic1").hide();
            $("#topic2").hide();
            $("#exp1").show();
            $("#exp2").show();
            $("#seal3").show();
            $("#law1").show();
            $("#law2").show();
            $("#sealtype").show();
            $("#monery").hide();
            $("#curr").hide();
            $("#fcManager").hide();
            $("#cfcoManager").hide();
            $("#gmSta").hide();
            $("#acoffer").hide();

        }else if (type=="2"){
            $("#hr").hide();
            $("#seal3").hide();
            $("#law1").hide();
            $("#law2").hide();
            $("#sealtype").hide();
            $("#monery").show();
            $("#curr").show();
            $("#fcManager").show();
            $("#cfcoManager").show();
            $("#gmSta").show();
            $("#acoffer").hide();

        }else if (type=="3"){
            $("#monery").hide();
            $("#curr").hide();
            $("#hr").hide();
            $("#seal3").hide();
            $("#law1").show();
            $("#law2").show();
            $("#sealtype").hide();
            $("#fcManager").hide();
            $("#cfcoManager").hide();
            $("#gmSta").show();
            $("#acoffer").show();
        }

    });
    $(function () {
        var company=$("#company").val();
        //抬头自动更换
        if (company=="5"){
            $(".my-h2").html("矽力杰半导体技术（杭州）有限公司")
        }else if (company=="7") {
            $(".my-h2").html("西安矽力杰半导体技术有限公司")
        }else if (company=="17") {
            $(".my-h2").html("成都矽力杰半导体技术有限公司")
        }else if (company=="19") {
            $(".my-h2").html("上海矽力杰半导体技术有限公司")
        }else if (company=="3") {
            $(".my-h2").html("Silergy Korea Limited")
        }else if (company=="16") {
            $(".my-h2").html("Silergy Technologies Private Limited")
        }else if (company=="15") {
            $(".my-h2").html("Silergy Semiconductor Samoa Limited")
        } else if (company=="12") {
            $(".my-h2").html("台湾矽力杰科技股份有限公司")
        }else if (company=="6") {
            $(".my-h2").html("南京矽力微电子技术有限公司")
        }else if (company=="13") {
            $(".my-h2").html("Silergy Semiconductor (Hong Kong) Limited 矽力杰半導體(香港)有限公司")
        }else if (company=="14") {
            $(".my-h2").html("上海矽力杰微电子技术有限公司")
        }else if (company=="20") {
            $(".my-h2").html("南京矽力微電子(香港)有限公司")
        }else if (company=="4") {
            $(".my-h2").html(" &nbsp &nbsp &nbsp &nbsp Silergy Technology")
        }else if (company=="9") {
            $(".my-h2").html("Silergy Semiconductor (Samoa) Limited")
        }else if (company=="1") {
            $(".my-h2").html(" &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp Silergy Corp")
        }else if (company=="21") {
            $(".my-h2").html("Silicon Prospect Investment Limited")
        }else if (company=="22") {
            $(".my-h2").html("合肥矽力杰半导体技术有限公司")
        }else if (company=="23") {
            $(".my-h2").html("矽力杰半導體(澳門)一人有限公司")
        }else{
            $(".my-h2").html("矽力杰半导体技术（杭州）有限公司")
        }
    });


    //添加一行
    function add(){
        debugger
        var $td = $("#addColumn").clone(true,false);       //增加一行,克隆第一个对象
        $(".my-table2").append($td);
        $(".my-table2 tr:last").find(":input").val('');   //将尾行元素克隆来的保存的值清空
    };

    //删除行
    $(document).on("click", ".operate-tr1", function(){
        debugger
        var n = $(this).parents("tr").index();  // 获取checkbox所在行的顺序
        n = n + 1;
        if(n == 1){
            $.modal.alertError("必须保留一行");
            return false;
        }else{
            $(".my-table2").find("tr:eq("+(n-1)+")").remove();
        }
    });
    
    $("#form-petition-add").validate({
        rules:{
            xxxx:{
                required:true,
            },
        },
        focusCleanup: true
    });
    function nameData(){
        $.get(ctx + "system/petition/getAlluser", function(data){
            debugger

            $(".name-data").typeahead({
                source: data.value
            });
        },'json');
    }

    function getUser(){
        var url = ctx + "system/user/allUserList";
        $.ajax({
            //几个参数需要注意一下
            type: "POST",//方法类型
            url: url,//url
            data: null,
            contentType: "application/json; charset=utf-8",
            dataType: "json",//预期服务器返回的数据类型
            // timeout: 60000,
            success: function (result) {
                if (result.code == web_status.SUCCESS){
                    var rows = result.rows;
                    rows.forEach(user=> {
                        $("#addname").append($("<option></option>").html(user.userName).val(user.userCode));
                    });
                    //刷新
                    $("#addname").selectpicker("refresh");
                }
            }
        });
    }
    
    function auditcwManager() {
        if ($.validate.form()) {

            var Object = {};
            var formObject = {};
            var formArray = $("#form-petition-add").serializeArray();
            $.each(formArray, function (i, item) {
                formObject[item.name] = item.value;
            });

            var petition={};
            petition.id=formObject.id;
            petition.acOfficerSta=formObject.acOfficerSta;
            petition.acOfficerDate = formObject.acOfficerDate;
            petition.acOfficerIdea=formObject.acOfficerIdea;
            petition.addauditSta=formObject.addauditSta;
            petition.addauditSta=formObject.addauditSta;

            var petitionAddauditList=[];
            var flag=true;
            debugger
            $(".addaudit").each(function (i,li) {
                i=i+1;
                var aud={};
                var  sid=$("#addname").val();//addName
                if ($("#addauditSta").val() != "") {
                    aud.sid=sid.toString();
                }
                if (sid !=""&&i>1){
                    $.modal.alert("请输入第"+i+"行的姓名")
                    flag=false;
                }
                petitionAddauditList.push(aud);
            });

            if (flag==false){
                $.modal.alert("名字不能为空")
                return false;
            }


            Object.petition=petition;
            Object.petitionAddauditList=petitionAddauditList;
            console.log(Object);
            debugger
            $.ajax({
                type: "POST",
                url: prefix + "/auditAC",
                data: JSON.stringify(Object),
                contentType: "application/json; charset=utf-8",
                dataType: "json",//预期服务器返回的数据类型
                beforeSend: function () {
                    $.modal.loading("正在给相关人员发送邮件,请稍等......");
                },
                success: function (result) {
                    $.operate.successTabCallback(result);
                },
                error: function () {
                    alert("error！");
                }
            });



        }
    };





</script>
<style>
    .table>thead>tr>th, .table>tbody>tr>th, .table>tfoot>tr>th, .table>thead>tr>td, .table>tbody>tr>td, .table>tfoot>tr>td{
        line-height: 1 !important;
    }
    .table>tbody>tr>td, .table>tbody>tr>th, .table>tfoot>tr>td, .table>tfoot>tr>th, .table>thead>tr>td, .table>thead>tr>th{
        padding: 3px 0 3px 4px !important;

    }
    .wrapper{
        /*text-align: center; !*让div内部文字居中*!*/
        margin: auto;
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        width: 1050px;
        height: auto;
        /*width: 1050px;*/

        /*border:1px solid #000*/
    }
    .my-table{
        margin-left: auto;
        margin-right: auto;
        /*margin-top: 1px;*/
        /*margin-bottom: 1px;*/
    }
    .my-table1 tr td{
        border:none;
    }
    .bottom{
        margin-top: 10px;
    }
    .form-control {
        border: 0;
        webkit-box-shadow: none;
        box-shadow: none;
        background-color: #FFFFF4;
    }
    table td{
        border: 1px solid #000;
    }
    .my-h2{
        margin: auto;
    }
    .my-h3 {
        margin-left: 80px;
    }
    #for-boder{
         border:1px double #000;
        width: 70%;
        margin-left: 100px;
    }
    #for-boder1{
        width: 70%;
        margin-left: 100px;
    }

    .my-div{
        margin: 1px auto;
    }
    .my-div2{
        margin:10px auto;
    }
    .container{
        margin-left: 10%;
    }
    body{
        overflow: scroll;
    }
</style>
</body>
</html>
