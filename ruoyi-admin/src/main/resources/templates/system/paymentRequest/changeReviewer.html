<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:include="include :: header('日期和时间')" />
    <th:block th:include="include :: layout-latest-css" />
</head>
<link th:href="@{/ajax/libs/select/select2.min.css}" rel="stylesheet"/>
<link th:href="@{/ajax/libs/select/select2-bootstrap.css}" rel="stylesheet"/>
<body class="gray-bg">
<form id="form-customer-case-cancel">
    <div class="col-md-12">
        <input type="hidden" id="paymentRequestId" th:value="${paymentRequestId}">
        <div class="form-group">
            <div class="col-sm-6">
                <label class="col-sm-3 control-label">审核人员：</label>
            </div>
            <div class="col-sm-6">
                <select id="sendToCode" name="sendToCode" class="form-control">
                    <option value="">请选择</option>
                    <option th:each="auditors:${auditorsList}" th:text="${auditors.userName}" th:value="${auditors.userCode}">
                    </option>
                </select>
            </div>
        </div>
    </div>
</form>
<th:block th:include="include :: footer" />
<script th:src="@{/ajax/libs/select/select2.min.js}"></script>
<script type="text/javascript">
    var prefix = ctx + "system/paymentRequest";

    $("#form-customer-case-cancel").validate({
        focusCleanup: true
    });

    function submitHandler() {
        if ($.validate.form()) {
            submitForm();
        }
    }

    function submitForm() {
        var formData = new FormData();
        formData.append('paymentRequestId', $('#paymentRequestId').val());
        formData.append('sendToCode', $('#sendToCode').val());
        console.log(formData);
        $.ajax({
            url: prefix + "/changeReviewer",
            type: 'post',
            cache: false,
            data: formData,
            processData: false,
            contentType: false,
            dataType: "json",
            beforeSend: function () {
                $.modal.loading("正在提交,请稍等......");
            },
            success: function(result) {
                if (result.code == 0) {
                    $.modal.reload();
                };
            }
        });
    }
</script>
</body>
</html>