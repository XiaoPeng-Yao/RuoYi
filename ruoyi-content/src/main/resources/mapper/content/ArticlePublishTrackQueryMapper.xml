<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper
	namespace="com.ruoyi.content.mapper.ArticlePublishTrackQueryMapper">


	<resultMap id="BaseResultMap"
		type="com.ruoyi.content.domain.ArticlePublishTrack">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Jul 10 
			14:07:08 CST 2018. -->
		<id column="PUBLISH_ID" property="publishId" jdbcType="VARCHAR" />
		<result column="COMPANY_ID" property="companyId" jdbcType="VARCHAR" />
		<result column="USER_ID" property="userId" jdbcType="VARCHAR" />
		<result column="ARTICLE_ID" property="articleId" jdbcType="VARCHAR" />
		<result column="AD_ID" property="adId" jdbcType="VARCHAR" />
		<result column="CARD_ID" property="cardId" jdbcType="VARCHAR" />
		<result column="ARTICLE_VERSION" property="articleVersion"
			jdbcType="VARCHAR" />
		<result column="PUBLISH_VIEW_URL" property="publishViewUrl"
			jdbcType="VARCHAR" />
		<result column="PUBLISH_EDIT_URL" property="publishEditUrl"
			jdbcType="VARCHAR" />
		<result column="PUBLISH_STATE" property="publishState"
			jdbcType="VARCHAR" />
		<result column="CREATE_DATE" property="createDate" jdbcType="VARCHAR" />
		<result column="CREATE_TIME" property="createTime" jdbcType="VARCHAR" />
		<result column="CREATE_USER" property="createUser" jdbcType="VARCHAR" />
		<result column="UPDATE_USER" property="updateUser" jdbcType="VARCHAR" />
		<result column="UPDATE_DATE" property="updateDate" jdbcType="VARCHAR" />
		<result column="UPDATE_TIME" property="updateTime" jdbcType="VARCHAR" />
		<result column="BACKGROUND_EDIT_URL" property="backgroundEditUrl"
			jdbcType="VARCHAR" />
		<result column="LIBRARY_STATE" property="libraryState"
			jdbcType="VARCHAR" />
	</resultMap>

	<select id="queryEditUrlByArticleId" resultMap="BaseResultMap"
		parameterType="java.lang.String">
		SELECT PUBLISH_ID, USER_ID, ARTICLE_ID, AD_ID, CARD_ID,
		PUBLISH_VIEW_URL,
		PUBLISH_EDIT_URL,
		PUBLISH_STATE, CREATE_DATE,
		CREATE_TIME, CREATE_USER, UPDATE_USER, UPDATE_DATE,
		UPDATE_TIME
		FROM
		article_publish_track where ARTICLE_ID =
		#{articleId,jdbcType=VARCHAR}
		AND PUBLISH_ID =
		#{puhlishId,jdbcType=VARCHAR}
	</select>

	<select id="queryPublishUserInfo" resultMap="BaseResultMap">
		SELECT
		PUBLISH_ID,
		COMPANY_ID,
		USER_ID,
		ARTICLE_ID,
		AD_ID,
		CARD_ID,
		PUBLISH_VIEW_URL,
		PUBLISH_EDIT_URL,
		PUBLISH_STATE,
		CREATE_DATE,
		CREATE_TIME,
		CREATE_USER,
		UPDATE_USER,
		UPDATE_DATE,
		UPDATE_TIME
		FROM
		article_publish_track
		WHERE
		ARTICLE_ID = #{articleId,jdbcType=VARCHAR}
		ORDER BY CREATE_DATE
		DESC,CREATE_TIME DESC
		limit
		#{startRow,jdbcType=DECIMAL},#{rows,jdbcType=DECIMAL}
	</select>

	<select id="queryArticleIdByUserId" resultMap="BaseResultMap">
		SELECT
		PUBLISH_ID, COMPANY_ID, USER_ID, ARTICLE_ID, AD_ID, CARD_ID,
		PUBLISH_VIEW_URL,ARTICLE_VERSION,
		PUBLISH_EDIT_URL,
		PUBLISH_STATE, CREATE_DATE,
		CREATE_TIME, CREATE_USER, UPDATE_USER, UPDATE_DATE,
		UPDATE_TIME,
		BACKGROUND_EDIT_URL, LIBRARY_STATE
		FROM
		article_publish_track WHERE 1=1
		and PUBLISH_STATE=0
		<if test="userId != null">
			and USER_ID in
			<foreach collection="userId" item="userId" index="index"
				open="(" close=")" separator=","> #{userId} </foreach>
		</if>
		ORDER BY CREATE_DATE DESC,CREATE_TIME DESC
		limit
		#{startRow,jdbcType=DECIMAL},#{rows,jdbcType=DECIMAL}
	</select>

	<select id="countArticleIdByUserId" resultType="java.lang.Integer">
		SELECT
		count(1)
		FROM
		article_publish_track WHERE 1=1
		<if test="userId != null">
			and USER_ID in
			<foreach collection="userId" item="userId" index="index"
				open="(" close=")" separator=","> #{userId} </foreach>
		</if>
	</select>


	<select id="queryByPublishId" resultMap="BaseResultMap">
		SELECT PUBLISH_ID, USER_ID, ARTICLE_ID, AD_ID, CARD_ID,
		PUBLISH_VIEW_URL,
		PUBLISH_EDIT_URL,
		PUBLISH_STATE, CREATE_DATE,
		CREATE_TIME, CREATE_USER,
		UPDATE_USER, UPDATE_DATE,
		UPDATE_TIME
		FROM
		article_publish_track where
		PUBLISH_ID = #{publishId,jdbcType=VARCHAR}
	</select>

	<select id="queryArticleinfo" resultMap="BaseResultMap">
		SELECT PUBLISH_ID, USER_ID, ARTICLE_ID, AD_ID, CARD_ID,
		PUBLISH_VIEW_URL,
		PUBLISH_EDIT_URL,
		PUBLISH_STATE, CREATE_DATE,
		CREATE_TIME, CREATE_USER,
		UPDATE_USER, UPDATE_DATE,
		UPDATE_TIME
		FROM
		article_publish_track where
		ARTICLE_ID=#{articleId,jdbcType=VARCHAR} and PUBLISH_ID like 'cofms%'
	</select>

</mapper>