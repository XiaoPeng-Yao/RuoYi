<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ruoyi.content.mapper.CmsSysAuthorityExMapper" >
  <resultMap id="BaseResultMap" type="com.ruoyi.content.domain.CmsSysAuthority" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Aug 17 17:24:12 CST 2017.
    -->
    <id column="NUM" property="num" jdbcType="INTEGER" />
    <result column="ID" property="id" jdbcType="VARCHAR" />
    <result column="LEVEL" property="level" jdbcType="VARCHAR" />
    <result column="TYPE" property="type" jdbcType="VARCHAR" />
    <result column="OPERATOR_ROLE_NAME" property="operatorRoleName" jdbcType="VARCHAR" />
    <result column="OPERATOR_ROLE_PATH" property="operatorRolePath" jdbcType="VARCHAR" />
    <result column="CREATE_DATE" property="createDate" jdbcType="VARCHAR" />
    <result column="CREATE_TIME" property="createTime" jdbcType="VARCHAR" />
    <result column="CREATE_USER" property="createUser" jdbcType="VARCHAR" />
    <result column="UPDATE_DATE" property="updateDate" jdbcType="VARCHAR" />
    <result column="UPDATE_TIME" property="updateTime" jdbcType="VARCHAR" />
    <result column="UPDATE_USER" property="updateUser" jdbcType="VARCHAR" />
  </resultMap>
  
  	<resultMap id="roleResultMap"
		type="com.ruoyi.content.domain.CmsSysRoleAuthorDto">
		<id column="NUM" property="num" jdbcType="INTEGER" />
		<result column="ID" property="id" jdbcType="VARCHAR" />
		<result column="LEVEL" property="level" jdbcType="VARCHAR" />
		<result column="TYPE" property="type" jdbcType="VARCHAR" />
		<result column="OPERATOR_ROLE_NAME" property="operatorRoleName"
			jdbcType="VARCHAR" />
		<result column="OPERATOR_ROLE_PATH" property="operatorRolePath"
			jdbcType="VARCHAR" />
		<result column="ISHAVE" property="isHave" jdbcType="VARCHAR" />
	</resultMap>
	
   <!-- 分页查询 -->
  <select id="selectAllMenuWithLimit" resultMap="BaseResultMap"
		parameterType="com.ruoyi.content.domain.CmsSysAuthorityExample">
		select NUM, ID, LEVEL, TYPE, OPERATOR_ROLE_NAME,
		OPERATOR_ROLE_PATH,
		CREATE_DATE, CREATE_TIME,
		CREATE_USER, UPDATE_DATE,
		UPDATE_TIME, UPDATE_USER from cms_sys_authority 
		where 1=1
		<if test="id != null and id !=''" >
       		and ID like CONCAT(CONCAT('%', #{id,jdbcType=VARCHAR}), '%')
     	</if>
     	<if test="level != null and level !=''" >
       		and LEVEL like CONCAT(CONCAT('%', #{level,jdbcType=VARCHAR}), '%')
     	</if>
     	<if test="type != null and type !=''" >
       		and TYPE like CONCAT(CONCAT('%', #{type,jdbcType=VARCHAR}), '%')
     	</if>
     	<if test="operatorRoleName != null and operatorRoleName !=''" >
       		and OPERATOR_ROLE_NAME like CONCAT(CONCAT('%', #{operatorRoleName,jdbcType=VARCHAR}), '%')
     	</if>
		order by TYPE,LEVEL ASC 
		limit #{startRow,jdbcType=DECIMAL},#{rows,jdbcType=DECIMAL}
	</select>
  <select id="selectAllRoleMenuWithLimit" resultMap="roleResultMap"
		parameterType="com.ruoyi.content.domain.CmsSysAuthorityExample">
		select NUM, ID, LEVEL, TYPE, OPERATOR_ROLE_NAME,
		OPERATOR_ROLE_PATH,
		CASE when
		id in (select PARENT_CHILD from
		cms_role_authority where
		SELF_CHILD=#{role,jdbcType=VARCHAR}) then 'Y'
		else 'N' end as isHave
		from
		cms_sys_authority
		where 1=1
		<if test="id != null and id !=''">
			and ID like CONCAT(CONCAT('%', #{id,jdbcType=VARCHAR}),
			'%')
		</if>
		<if test="level != null and level !=''">
			and LEVEL like CONCAT(CONCAT('%',
			#{level,jdbcType=VARCHAR}), '%')
		</if>
		<if test="type != null and type !=''">
			and TYPE like CONCAT(CONCAT('%',
			#{type,jdbcType=VARCHAR}), '%')
		</if>
		<if test="operatorRoleName != null and operatorRoleName !=''">
			and OPERATOR_ROLE_NAME like CONCAT(CONCAT('%',
			#{operatorRoleName,jdbcType=VARCHAR}), '%')
		</if>
		order by TYPE,LEVEL ASC
		limit
		#{startRow,jdbcType=DECIMAL},#{rows,jdbcType=DECIMAL}
	</select>
</mapper>