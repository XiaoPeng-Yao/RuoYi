<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.bend.mapper.WechatMemberMapper">
    
    <resultMap type="WechatMember" id="WechatMemberResult">
        <result property="id"    column="id"    />
        <result property="memberId"    column="member_id"    />
        <result property="mobilePhone"    column="mobile_phone"    />
        <result property="appId"    column="app_id"    />
        <result property="openId"    column="open_id"    />
        <result property="nickname"    column="nickname"    />
        <result property="realName"    column="real_name"    />
        <result property="sex"    column="sex"    />
        <result property="sexDesc"    column="sex_desc"    />
        <result property="followStatus"    column="follow_status"    />
        <result property="subscribe"    column="subscribe"    />
        <result property="city"    column="city"    />
        <result property="province"    column="province"    />
        <result property="country"    column="country"    />
        <result property="language"    column="language"    />
        <result property="headImgUrl"    column="head_img_url"    />
        <result property="subscribeTime"    column="subscribe_time"    />
        <result property="unionid"    column="unionid"    />
        <result property="remark"    column="remark"    />
        <result property="groupId"    column="group_id"    />
        <result property="tagIds"    column="tag_ids"    />
        <result property="subscribeScene"    column="subscribe_scene"    />
        <result property="qrScene"    column="qr_scene"    />
        <result property="qrSceneStr"    column="qr_scene_str"    />
        <result property="createTime"    column="create_time"    />
        <result property="updateTime"    column="update_time"    />
        <result property="deleted"    column="deleted"    />
    </resultMap>

    <sql id="selectWechatMemberVo">
        select id, member_id, mobile_phone, app_id, open_id, nickname, real_name, sex, sex_desc, follow_status, subscribe, city, province, country, language, head_img_url, subscribe_time, unionid, remark, group_id, tag_ids, subscribe_scene, qr_scene, qr_scene_str, create_time, update_time, deleted from bend_wechat_member
    </sql>

    <select id="selectWechatMemberList" parameterType="WechatMember" resultMap="WechatMemberResult">
        <include refid="selectWechatMemberVo"/>
        <where>  
            <if test="mobilePhone != null  and mobilePhone != ''"> and mobile_phone = #{mobilePhone}</if>
            <if test="realName != null  and realName != ''"> and real_name like concat('%', #{realName}, '%')</if>
            <if test="params.beginCreateTime != null and params.beginCreateTime != '' and params.endCreateTime != null and params.endCreateTime != ''"> and create_time between #{params.beginCreateTime} and #{params.endCreateTime}</if>
        </where>
    </select>
    
    <select id="selectWechatMemberById" parameterType="Long" resultMap="WechatMemberResult">
        <include refid="selectWechatMemberVo"/>
        where id = #{id}
    </select>
        
    <insert id="insertWechatMember" parameterType="WechatMember" useGeneratedKeys="true" keyProperty="id">
        insert into bend_wechat_member
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="memberId != null">member_id,</if>
            <if test="mobilePhone != null">mobile_phone,</if>
            <if test="appId != null">app_id,</if>
            <if test="openId != null">open_id,</if>
            <if test="nickname != null">nickname,</if>
            <if test="realName != null">real_name,</if>
            <if test="sex != null">sex,</if>
            <if test="sexDesc != null">sex_desc,</if>
            <if test="followStatus != null">follow_status,</if>
            <if test="subscribe != null">subscribe,</if>
            <if test="city != null">city,</if>
            <if test="province != null">province,</if>
            <if test="country != null">country,</if>
            <if test="language != null">language,</if>
            <if test="headImgUrl != null">head_img_url,</if>
            <if test="subscribeTime != null">subscribe_time,</if>
            <if test="unionid != null">unionid,</if>
            <if test="remark != null">remark,</if>
            <if test="groupId != null">group_id,</if>
            <if test="tagIds != null">tag_ids,</if>
            <if test="subscribeScene != null">subscribe_scene,</if>
            <if test="qrScene != null">qr_scene,</if>
            <if test="qrSceneStr != null">qr_scene_str,</if>
            <if test="createTime != null">create_time,</if>
            <if test="updateTime != null">update_time,</if>
            <if test="deleted != null">deleted,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="memberId != null">#{memberId},</if>
            <if test="mobilePhone != null">#{mobilePhone},</if>
            <if test="appId != null">#{appId},</if>
            <if test="openId != null">#{openId},</if>
            <if test="nickname != null">#{nickname},</if>
            <if test="realName != null">#{realName},</if>
            <if test="sex != null">#{sex},</if>
            <if test="sexDesc != null">#{sexDesc},</if>
            <if test="followStatus != null">#{followStatus},</if>
            <if test="subscribe != null">#{subscribe},</if>
            <if test="city != null">#{city},</if>
            <if test="province != null">#{province},</if>
            <if test="country != null">#{country},</if>
            <if test="language != null">#{language},</if>
            <if test="headImgUrl != null">#{headImgUrl},</if>
            <if test="subscribeTime != null">#{subscribeTime},</if>
            <if test="unionid != null">#{unionid},</if>
            <if test="remark != null">#{remark},</if>
            <if test="groupId != null">#{groupId},</if>
            <if test="tagIds != null">#{tagIds},</if>
            <if test="subscribeScene != null">#{subscribeScene},</if>
            <if test="qrScene != null">#{qrScene},</if>
            <if test="qrSceneStr != null">#{qrSceneStr},</if>
            <if test="createTime != null">#{createTime},</if>
            <if test="updateTime != null">#{updateTime},</if>
            <if test="deleted != null">#{deleted},</if>
         </trim>
    </insert>

    <update id="updateWechatMember" parameterType="WechatMember">
        update bend_wechat_member
        <trim prefix="SET" suffixOverrides=",">
            <if test="memberId != null">member_id = #{memberId},</if>
            <if test="mobilePhone != null">mobile_phone = #{mobilePhone},</if>
            <if test="appId != null">app_id = #{appId},</if>
            <if test="openId != null">open_id = #{openId},</if>
            <if test="nickname != null">nickname = #{nickname},</if>
            <if test="realName != null">real_name = #{realName},</if>
            <if test="sex != null">sex = #{sex},</if>
            <if test="sexDesc != null">sex_desc = #{sexDesc},</if>
            <if test="followStatus != null">follow_status = #{followStatus},</if>
            <if test="subscribe != null">subscribe = #{subscribe},</if>
            <if test="city != null">city = #{city},</if>
            <if test="province != null">province = #{province},</if>
            <if test="country != null">country = #{country},</if>
            <if test="language != null">language = #{language},</if>
            <if test="headImgUrl != null">head_img_url = #{headImgUrl},</if>
            <if test="subscribeTime != null">subscribe_time = #{subscribeTime},</if>
            <if test="unionid != null">unionid = #{unionid},</if>
            <if test="remark != null">remark = #{remark},</if>
            <if test="groupId != null">group_id = #{groupId},</if>
            <if test="tagIds != null">tag_ids = #{tagIds},</if>
            <if test="subscribeScene != null">subscribe_scene = #{subscribeScene},</if>
            <if test="qrScene != null">qr_scene = #{qrScene},</if>
            <if test="qrSceneStr != null">qr_scene_str = #{qrSceneStr},</if>
            <if test="createTime != null">create_time = #{createTime},</if>
            <if test="updateTime != null">update_time = #{updateTime},</if>
            <if test="deleted != null">deleted = #{deleted},</if>
        </trim>
        where id = #{id}
    </update>

    <delete id="deleteWechatMemberById" parameterType="Long">
        delete from bend_wechat_member where id = #{id}
    </delete>

    <delete id="deleteWechatMemberByIds" parameterType="String">
        delete from bend_wechat_member where id in 
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>

</mapper>